let db;
const Discord = require("discord.js")
module.exports = class afkcord {
constructor(option) {
if(option === "quick.db") db = require("quick.db")
if(option === "wio.db") db = require("wio.db")
else {
	throw new Error("Please Choose One Of Database Modules.")
}
}
static options(options) {
let notafkmsg;
let afkmsg;
if(!options.notafkmsg) notafkmsg = "You Are Not AFK Anymore!"
if(options.notafkmsg) notafkmsg = options.notafkmsg
if(!options.afkmsg) afkmsg = "You Are AFK Now!"
if(options.afkmsg) afkmsg = options.afkmsg
db.set(`afkmsg`,afkmsg)
db.set(`notafkmsg`,notafkmsg)
}
static afk(client,userid,reason,chnlid) {
if(!chnlid) throw new Error("Wrong Usage(Cannot Find Channel ID) Please Check The Docs!")
if(isNaN(chnlid)) throw new Error("Please Enter An Valid Channel ID")
if(!userid) throw new Error("Wrong Usage(Cannot Find User) Please Check The Docs!")
if(isNaN(userid)) throw new Error("Please Enter An Valid User ID!")
if(!reason) throw new Error("Wrong Usage(Cannot Find Reason) Please Check The Docs!")
else {
let afkmsg = db.fetch(`afkmsg`)
client.channels.cache.get(chnlid).send(afkmsg)
db.set(`afk_${userid}`,true)
db.set(`afkreason_${userid}`,reason)
db.set(`afktime_${userid}`,Date.now())
client.on("message",async(msg)=>{
let fetchdb = db.fetch(`afk_${msg.author.id}`)
if(!fetchdb) return;
if(fetchdb === true) {
let notafkmsg = db.fetch(`notafkmsg`)
msg.channel.send(notafkmsg)
db.delete(`afk_${msg.author.id}`)
db.delete(`afkreason_${msg.author.id}`)
db.delete(`afktime_${msg.author.id}`)
}
})
}
}
}